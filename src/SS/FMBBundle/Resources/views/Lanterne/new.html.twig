{% extends "SSFMBBundle::layout.html.twig" %}

{% block body -%}
    <h1>Lanterne creation</h1>

    {{ form(form) }}

        <ul class="record_actions">
    <li>
        <a href="{{ path('lanterne') }}">
            Back to the list
        </a>
    </li>
</ul>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#ss_fmbbundle_lanterne_parc').change(function(){
                console.log('change detected');
                var val = $(this).val();
                $.ajax({
                    type: "POST",
                    url: "{{ url('parc_ajax_call') }}?parc_id=" + val,
                    success: function(data) {
                        console.log('success detected');
                        // Remove current options
                        $('#ss_fmbbundle_lanterne_nomLanterne').html('');
                        $.each(data, function(k, v) {
                            $('#ss_fmbbundle_lanterne_nomLanterne').append('<option value="' + v + '">' + k + '</option>');
                        });
                    }
                });
                return false;
            });
        });
    </script>
{% endblock %}
